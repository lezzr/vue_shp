<template>
<div class="v-catalog">
  <header class="top__cata center">
    <div class="top_left_nav">
      <p> <SPAN class="diff_text">NEW ARRIVALS</SPAN></p>
    </div>
    <div class="top_right_">
      <nav class="top_right_nav">
        <a class="" href="index.html">HOME</a> /
        <a class="" href="#">MEN</a> /
        <a class="" href="#"><SPAN class="diff_text"> NEW ARRIVALS </SPAN></a>
      </nav>
    </div>
  </header>
  <nav class="cata_buttons">
    <div class="filter">
      <details class="nav_top_l">
        <summary>
          FILTER <svg class="cat_filter" width="15" height="10" viewBox="0 0 15 10" fill="none"
                      xmlns="http://www.w3.org/2000/svg">
          <path
              d="M0.833333 10H4.16667C4.625 10 5 9.625 5 9.16667C5 8.70833 4.625 8.33333 4.16667 8.33333H0.833333C0.375 8.33333 0 8.70833 0 9.16667C0 9.625 0.375 10 0.833333 10ZM0 0.833333C0 1.29167 0.375 1.66667 0.833333 1.66667H14.1667C14.625 1.66667 15 1.29167 15 0.833333C15 0.375 14.625 0 14.1667 0H0.833333C0.375 0 0 0.375 0 0.833333ZM0.833333 5.83333H9.16667C9.625 5.83333 10 5.45833 10 5C10 4.54167 9.625 4.16667 9.16667 4.16667H0.833333C0.375 4.16667 0 4.54167 0 5C0 5.45833 0.375 5.83333 0.833333 5.83333Z"
              fill="black" />
        </svg>

        </summary>
        <details class="filter_category">
          <summary>
            CATEGORY
          </summary>
          <ol>
          <li>
            <ul> <a href="#" class="filter_links">Accessories</a> </ul>
            <ul> <a href="#" class="filter_links">Bags</a> </ul>
            <ul> <a href="#" class="filter_links">Denim</a> </ul>
            <ul> <a href="#" class="filter_links">Hoodies & Sweatshirts</a> </ul>
            <ul> <a href="#" class="filter_links">Jackets & Coats</a> </ul>
            <ul> <a href="#" class="filter_links">Polos</a> </ul>
            <ul> <a href="#" class="filter_links">Shirts</a> </ul>
            <ul> <a href="#" class="filter_links">Shoes</a> </ul>
            <ul> <a href="#" class="filter_links">Sweaters & Knits</a> </ul>
            <ul> <a href="#" class="filter_links">T-Shirts</a> </ul>
            <ul> <a href="#" class="filter_links">Tanks</a> </ul>
          </li>
          </ol>
        </details>
        <details class="filter_category">
          <summary>
            BRAND
          </summary>
          <ol>
          <li>
            <ul> <a href="#" class="filter_links">Accessories</a> </ul>
            <ul> <a href="#" class="filter_links">Bags</a> </ul>
            <ul> <a href="#" class="filter_links">Denim</a> </ul>
            <ul> <a href="#" class="filter_links">Hoodies & Sweatshirts</a> </ul>
            <ul> <a href="#" class="filter_links">Jackets & Coats</a> </ul>
            <ul> <a href="#" class="filter_links">Polos</a> </ul>
            <ul> <a href="#" class="filter_links">Shirts</a> </ul>
            <ul> <a href="#" class="filter_links">Shoes</a> </ul>
            <ul> <a href="#" class="filter_links">Sweaters & Knits</a> </ul>
            <ul> <a href="#" class="filter_links">T-Shirts</a> </ul>
            <ul> <a href="#" class="filter_links">Tanks</a> </ul>
          </li>
          </ol>
        </details>
        <details class="filter_category">
          <summary>
            DESIGNER
          </summary>
          <ol>
          <li>
            <ul> <a href="#" class="filter_links">Accessories</a> </ul>
            <ul> <a href="#" class="filter_links">Bags</a> </ul>
            <ul> <a href="#" class="filter_links">Denim</a> </ul>
            <ul> <a href="#" class="filter_links">Hoodies & Sweatshirts</a> </ul>
            <ul> <a href="#" class="filter_links">Jackets & Coats</a> </ul>
            <ul> <a href="#" class="filter_links">Polos</a> </ul>
            <ul> <a href="#" class="filter_links">Shirts</a> </ul>
            <ul> <a href="#" class="filter_links">Shoes</a> </ul>
            <ul> <a href="#" class="filter_links">Sweaters & Knits</a> </ul>
            <ul> <a href="#" class="filter_links">T-Shirts</a> </ul>
            <ul> <a href="#" class="filter_links">Tanks</a> </ul>
          </li>
          </ol>
        </details>

      </details>

    </div>


    <div class="cards_menu">
    <details class="cards_menu__trending">
      <summary>TRENDING NOW <svg width="11" height="6" viewBox="0 0 11 6" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
        <path
            d="M5.00214 5.00214C4.83521 5.00247 4.67343 4.94433 4.54488 4.83782L0.258102 1.2655C0.112196 1.14422 0.0204417 0.969958 0.00302325 0.781035C-0.0143952 0.592112 0.0439493 0.404007 0.165221 0.258101C0.286493 0.112196 0.460759 0.0204417 0.649682 0.00302327C0.838605 -0.0143952 1.02671 0.043949 1.17262 0.165221L5.00214 3.36602L8.83167 0.279536C8.90475 0.220188 8.98884 0.175869 9.0791 0.149125C9.16937 0.122382 9.26403 0.113741 9.35764 0.1237C9.45126 0.133659 9.54198 0.162021 9.6246 0.207156C9.70722 0.252292 9.7801 0.313311 9.83906 0.386705C9.90449 0.460167 9.95405 0.546351 9.98462 0.639855C10.0152 0.733359 10.0261 0.83217 10.0167 0.930097C10.0073 1.02802 9.97784 1.12296 9.93005 1.20895C9.88227 1.29494 9.81723 1.37013 9.73904 1.42982L5.45225 4.88068C5.32002 4.97036 5.16154 5.01312 5.00214 5.00214Z"
            fill="#6F6E6E" />
      </svg></summary>
      <input type="checkbox" name="option1" value="a1">placeholder<br>
      <input type="checkbox" name="option2" value="a2">placeholder<br>
      <input type="checkbox" name="option3" value="a3">placeholder<br>
      <input type="checkbox" name="option4" value="a4">placeholder<br>
      <input type="checkbox" name="option5" value="a5">placeholder<br>
    </details>
    <details class="cards_menu__s">
      <summary>SIZE <svg width="11" height="6" viewBox="0 0 11 6" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
        <path
            d="M5.00214 5.00214C4.83521 5.00247 4.67343 4.94433 4.54488 4.83782L0.258102 1.2655C0.112196 1.14422 0.0204417 0.969958 0.00302325 0.781035C-0.0143952 0.592112 0.0439493 0.404007 0.165221 0.258101C0.286493 0.112196 0.460759 0.0204417 0.649682 0.00302327C0.838605 -0.0143952 1.02671 0.043949 1.17262 0.165221L5.00214 3.36602L8.83167 0.279536C8.90475 0.220188 8.98884 0.175869 9.0791 0.149125C9.16937 0.122382 9.26403 0.113741 9.35764 0.1237C9.45126 0.133659 9.54198 0.162021 9.6246 0.207156C9.70722 0.252292 9.7801 0.313311 9.83906 0.386705C9.90449 0.460167 9.95405 0.546351 9.98462 0.639855C10.0152 0.733359 10.0261 0.83217 10.0167 0.930097C10.0073 1.02802 9.97784 1.12296 9.93005 1.20895C9.88227 1.29494 9.81723 1.37013 9.73904 1.42982L5.45225 4.88068C5.32002 4.97036 5.16154 5.01312 5.00214 5.00214Z"
            fill="#6F6E6E" />
      </svg></summary>
      <div class="cards_menu__size">
        <ol>
        <li>
          <ul><input type="checkbox" name="option1" value="a1">
            <label class="cards_menu__size_input">XS</label>
          </ul>
          <ul><input type="checkbox" name="option2" value="a2">
            <label class="cards_menu__size_input">S</label>
          </ul>
          <ul><input type="checkbox" name="option3" value="a3">
            <label class="cards_menu__size_input">M</label>
          </ul>
          <ul><input type="checkbox" name="option4" value="a4">
            <label class="cards_menu__size_input">L</label>
          </ul>
        </li>
        </ol>
      </div>
    </details>
    <details class="cards_menu__price">
      <summary>PRICE <svg width="11" height="6" viewBox="0 0 11 6" fill="none"
                          xmlns="http://www.w3.org/2000/svg">
        <path
            d="M5.00214 5.00214C4.83521 5.00247 4.67343 4.94433 4.54488 4.83782L0.258102 1.2655C0.112196 1.14422 0.0204417 0.969958 0.00302325 0.781035C-0.0143952 0.592112 0.0439493 0.404007 0.165221 0.258101C0.286493 0.112196 0.460759 0.0204417 0.649682 0.00302327C0.838605 -0.0143952 1.02671 0.043949 1.17262 0.165221L5.00214 3.36602L8.83167 0.279536C8.90475 0.220188 8.98884 0.175869 9.0791 0.149125C9.16937 0.122382 9.26403 0.113741 9.35764 0.1237C9.45126 0.133659 9.54198 0.162021 9.6246 0.207156C9.70722 0.252292 9.7801 0.313311 9.83906 0.386705C9.90449 0.460167 9.95405 0.546351 9.98462 0.639855C10.0152 0.733359 10.0261 0.83217 10.0167 0.930097C10.0073 1.02802 9.97784 1.12296 9.93005 1.20895C9.88227 1.29494 9.81723 1.37013 9.73904 1.42982L5.45225 4.88068C5.32002 4.97036 5.16154 5.01312 5.00214 5.00214Z"
            fill="#6F6E6E" />
      </svg></summary>
    </details>
  </div>
  </nav>
  <div class="v-catalog__list center featured_items">
    <v-catalog-item
    v-for="product in filteredProducts"
    :key="product.article"
    :product_data="product"
    @addToCart="addToCart"
    @toProductPage="toProductPage"
    />
  </div>

</div>
</template>

<script>
import vCatalogItem from './v-catalog-item'
import {mapActions, mapGetters} from 'vuex'
export default {
  name: "v-catalog",
  components:{
    vCatalogItem
  },
  props:{},
  data(){
    return {
      sortedProducts: []
    }
  },
  computed:{
    ...mapGetters([
        'PRODUCTS',
        'CART',
        'SEARCH_VALUE'
    ]),
    filteredProducts() {
      if (this.sortedProducts.length){
        return this.sortedProducts
      } else {
        return this.PRODUCTS
      }
    }
  },
  methods:{
    ...mapActions([
        'GET_PRODUCTS_FROM_API',
        'ADD_TO_CART',
        'GET_SEARCH_VALUE_TO_VUEX'
    ]),
    addToCart(data){
      this.ADD_TO_CART(data)
    },
    sortProductsSearch(value){
      this.sortedProducts = [...this.PRODUCTS]
      if (value) {
        this.sortedProducts = this.sortedProducts.filter(function(item) {
          return item.name.toLowerCase().includes(value.toLowerCase())
        })
      } else {
        this.sortedProducts = this.PRODUCTS
      }

    },
    toProductPage(article){
      this.$router.push({ name: 'products', query: {'product': article}})
    }

  },
  watch:{
    SEARCH_VALUE() {
      this.sortProductsSearch(this.SEARCH_VALUE)
    }
  },
  mounted() {
    this.GET_PRODUCTS_FROM_API()
    .then((response) =>{
      if (response.data){
        this.sortProductsSearch(this.SEARCH_VALUE)
      }
    })
  }
}
</script>

<style>
.v-catalog__list{
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
}

.featured_items {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  gap: 30px;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  justify-content: center;
  margin-bottom: 188px;
}
.header__link {
  margin-right: 33px;
}
.top__cata {
  background: #F1E4E6;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  padding-left: calc(50% - 570px);
  padding-right: calc(50% - 570px);
  height: 148px;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
  margin: 0 auto;
  margin-bottom: 48px;
}
.cata_buttons {
  margin-right: 16px;
  margin-left: 16px;
}
.cata_buttons {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  margin-right: 39%;
  margin-left: 8px;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
  margin-bottom: 64px;
}
.nav_top_l {
  font-family: Lato;
  font-style: normal;
  font-weight: 600;
  font-size: 14px;
  line-height: 17px;
  color: #000000;
}

.nav_top_l[open] {
  width: 300px;
  background-color: #FFFFFF;
  position: absolute;
  color: #EF5B70;
  -webkit-box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);
  box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);
  z-index: 1;
}

.nav_top_l[open] summary {
  padding-top: 13px;
  padding-left: 16px;
}

.nav_top_l[open] cat_filter {
  fill: #EF5B70;
}

.nav_top_l svg {
  padding-left: 11px;
}

.filter {
  position: relative;
}

.filter_category {
  margin-top: 16px;
  margin-left: 16px;
  margin-bottom: 16px;
}

.filter_category li {
  list-style-type: none;
  margin-top: 24px;
  margin-left: 11px;
}

.filter_category li ul a {
  font-family: Lato;
  font-style: normal;
  font-weight: normal;
  font-size: 14px;
  line-height: 17px;
  color: #6F6E6E;
}

.filter_category li ul:not(:last-child) {
  padding-bottom: 11px;
}

.filter_category summary {
  border-left: 5px solid #EF5B70;
  border-bottom: 1px solid #EBEBEB;
  padding-left: 11px;
  padding-top: 11px;
  padding-bottom: 11px;
  margin-right: 16px;
}

summary::-webkit-details-marker {
  display: none;
}
.cards_menu a:not(:last-child) {
  padding-right: 32px;
}
.cards_menu {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  gap: 28px;
  font-family: Lato;
  font-style: normal;
  font-weight: normal;
  font-size: 14px;
  line-height: 17px;
  color: #6F6E6E;
}

.cards_menu__s {
  position: relative;
}

.cards_menu__size {
  width: 70px;
  background-color: #FFFFFF;
  position: absolute;
  -webkit-box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);
  box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);
  z-index: 1;
  margin-top: 5px;
  padding-top: 7px;
  padding-left: 9px;
  padding-bottom: 11px;
}

.cards_menu__size input:not(:last-child) {
  padding-bottom: 10px;
}

.cards_menu__size__input {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
}

.cards_menu__size label {
  font-family: Roboto;
  font-style: normal;
  font-weight: normal;
  font-size: 14px;
  line-height: 16px;
  margin-left: 8px;
  color: #6F6E6E;
}

.cards_menu__size li {
  list-style-type: none;
}

.cards_menu svg {
  padding-left: 10px;
}

</style>
